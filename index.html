<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VR Centre apps Launcher</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: transparent;
            /* Fix for rounded corners artifacts */
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1f2937;
        }

        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 9999px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }

        .btn-glow {
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.5), 0 0 5px rgba(59, 130, 246, 0.4);
        }

        .game-logo-active {
            outline: 2px solid #3b82f6;
            transform: scale(1.1);
        }

        .hidden {
            display: none;
        }

        /* Frameless Window CSS */
        #title-bar-btns {
            -webkit-app-region: no-drag;
            display: flex;
        }

        .window-control-btn {
            width: 46px;
            height: 32px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #9ca3af;
            /* gray-400 */
            transition: background-color 0.2s, color 0.2s;
            cursor: default;
        }

        .window-control-btn:hover {
            background-color: #374151;
            /* gray-700 */
            color: white;
        }

        #close-btn:hover {
            background-color: #ef4444;
            /* red-500 */
            color: white;
        }

        body {
            -webkit-user-select: none;
            /* Safari */
            -ms-user-select: none;
            /* IE 10+ */
            user-select: none;
            /* Standard syntax */
        }

        /* Utility classes for dragging */
        .-webkit-app-region-drag {
            -webkit-app-region: drag;
        }

        .-webkit-app-region-no-drag {
            -webkit-app-region: no-drag;
        }
    </style>
</head>

<body class="bg-transparent text-white overflow-hidden h-screen">

    <!-- App Frame: Wraps everything to provide rounded corners and background -->
    <div id="app-frame"
        class="relative w-full h-full bg-gray-900 rounded-3xl overflow-hidden border border-gray-800 shadow-2xl">

        <!-- Custom Title Bar -->
        <div id="title-bar"
            class="-webkit-app-region-drag h-8 bg-transparent flex justify-end items-center px-4 fixed top-0 left-0 w-full z-50 select-none">

            <!-- Centered Title Group -->
            <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 flex items-center gap-2">
                <img src="assets/icon-white_s.png" alt="Icon" class="w-4 h-4">
                <span class="text-xs text-gray-300 font-medium tracking-wide">VR Centre Apps Launcher</span>
            </div>
            <div id="title-bar-btns" class="-webkit-app-region-no-drag flex items-center h-full">
                <div id="minimize-btn"
                    class="window-control-btn hover:bg-gray-700 flex items-center justify-center w-12 h-8 cursor-pointer"
                    title="Minimize">
                    <svg width="10" height="1" viewBox="0 0 10 1" class="text-gray-400">
                        <rect width="10" height="1" fill="currentColor" />
                    </svg>
                </div>
                <div id="maximize-btn"
                    class="window-control-btn hover:bg-gray-700 flex items-center justify-center w-12 h-8 cursor-pointer"
                    title="Maximize">
                    <svg width="10" height="10" viewBox="0 0 10 10" class="text-gray-400">
                        <rect width="10" height="10" stroke="currentColor" fill="none" stroke-width="1" />
                    </svg>
                </div>
                <div id="close-btn"
                    class="window-control-btn hover:bg-red-500 hover:text-white flex items-center justify-center w-12 h-8 cursor-pointer"
                    title="Close">
                    <svg width="10" height="10" viewBox="0 0 10 10" class="text-gray-400 group-hover:text-white">
                        <path d="M1,1 L9,9 M9,1 L1,9" stroke="currentColor" stroke-width="1" />
                    </svg>
                </div>
            </div>
        </div>

        <!-- Login View -->
        <div id="login-view" class="hidden flex flex-col items-center justify-center h-full pt-8">
            <div class="w-full max-w-xs bg-gray-900 p-8 rounded-2xl shadow-none border-none">
                <div class="flex justify-start w-full mb-4">
                    <button id="back-to-launcher"
                        class="text-sm text-gray-400 hover:text-white hover:underline focus:outline-none">
                        &larr; Back to Launcher
                    </button>
                </div>
                <h1 class="text-3xl font-black text-center mb-6">VRC Launcher Login</h1>
                <form id="electron-login-form" class="px-2 pt-2 pb-4 mb-4">
                    <div class="mb-4">
                        <label class="block text-gray-400 text-sm font-bold mb-2" for="email">
                            Email
                        </label>
                        <input
                            class="shadow appearance-none border border-gray-700 rounded-xl w-full py-2 px-3 text-gray-200 bg-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                            id="email" type="email" placeholder="email@example.com" required>
                    </div>
                    <div class="mb-6">
                        <label class="block text-gray-400 text-sm font-bold mb-2" for="password">
                            Password
                        </label>
                        <input
                            class="shadow appearance-none border border-gray-700 rounded-xl w-full py-2 px-3 text-gray-200 bg-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline"
                            id="password" type="password" placeholder="******************" required>
                    </div>
                    <div class="flex items-center justify-between">
                        <button id="login-button"
                            class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-xl focus:outline-none focus:shadow-outline w-full"
                            type="submit">
                            Log In
                        </button>
                    </div>
                    <p id="error-message" class="text-red-500 text-xs italic mt-4 text-center"></p>
                </form>
                <div class="text-center">
                    <a href="#" id="website-link"
                        class="inline-block align-baseline font-bold text-sm text-blue-500 hover:text-blue-800">
                        Visit Website
                    </a>
                </div>
            </div>
        </div>

        <!-- Main Launcher View -->
        <div id="launcher-view" class="hidden h-full">
            <!-- Main Container -->
            <div id="launcher" class="flex h-full bg-gray-900 text-white overflow-hidden box-border">
                <!-- Sidebar: Add pt-8 to push content below title bar -->
                <!-- Sidebar: Add pt-8 to push content below title bar -->
                <aside
                    class="w-20 lg:w-24 bg-gray-900 border-r border-gray-800 flex flex-col justify-between shrink-0 h-full relative z-0 pt-8 pb-4">
                    <div class="flex flex-col items-center w-full">
                        <div class="text-blue-500 font-black text-2xl p-4 text-center">VRC</div>
                        <nav id="game-list" class="flex flex-col items-center space-y-4 px-2 w-full"></nav>
                    </div>

                    <!-- Global Settings Button -->
                    <div class="flex flex-col items-center w-full px-2">
                        <button id="global-settings-button"
                            class="p-3 text-gray-500 hover:text-white rounded-xl hover:bg-gray-800 transition-colors duration-200"
                            title="Settings">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                        </button>
                    </div>
                </aside>

                <main class="flex-1 relative">
                    <div class="absolute inset-0 w-full h-full z-0">
                        <img id="game-background" src=""
                            class="w-full h-full object-cover transition-opacity duration-1000" alt="Game Background">
                        <div class="absolute inset-0 bg-black/60"></div>
                        <div
                            class="absolute bottom-0 left-0 right-0 h-1/2 bg-gradient-to-t from-gray-900 to-transparent">
                        </div>
                    </div>
                    <!-- Main Content Wrapper: Add pt-8 to push content below transparency -->
                    <div class="relative z-10 flex flex-col h-full p-8 md:p-12 pt-16">
                        <header class="flex justify-between items-center">
                            <div class="flex items-center space-x-6 text-gray-300">
                                <a href="#" id="website-link"
                                    class="hover:text-white transition-colors duration-200 font-semibold">WEBSITE</a>
                                <a href="#" id="my-account-link"
                                    class="hover:text-white transition-colors duration-200">MY
                                    ACCOUNT</a>
                            </div>
                            <div class="flex items-center space-x-4">
                                <!-- User Info: Shown when logged in -->
                                <div id="user-info" class="hidden items-center space-x-4">
                                    <span id="username-display" class="text-sm font-medium">PlayerOne</span>
                                    <img src="https://placehold.co/40x40/1f2937/ffffff?text=P"
                                        class="rounded-full w-10 h-10 border-2 border-gray-600">
                                    <button id="logout-button"
                                        class="text-xs text-gray-400 hover:text-white hover:underline focus:outline-none">Logout</button>
                                </div>
                                <!-- Guest Info: Shown when logged out -->
                                <div id="guest-info" class="hidden">
                                    <button id="show-login-button"
                                        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                                        Login
                                    </button>
                                </div>
                            </div>
                        </header>
                        <div class="flex-grow flex items-end">
                            <div class="w-full">
                                <h1 id="game-title"
                                    class="text-5xl md:text-7xl font-black uppercase tracking-wider transition-opacity duration-500">
                                </h1>
                                <p id="game-tagline" class="text-gray-400 mt-2 text-lg"></p>
                                <div class="mt-8 flex items-center space-x-6">
                                    <button id="action-button"
                                        class="px-12 py-4 text-xl font-bold rounded-lg transition-all duration-300 flex items-center justify-center min-w-[200px]"></button>
                                    <div id="download-controls" class="hidden items-center space-x-4">
                                        <button id="pause-resume-button"
                                            class="px-6 py-4 text-lg font-bold rounded-lg bg-gray-600 hover:bg-gray-700 transition-all duration-300">Pause</button>
                                        <button id="cancel-button"
                                            class="px-6 py-4 text-lg font-bold rounded-lg bg-red-600 hover:bg-red-700 transition-all duration-300">Cancel</button>
                                    </div>
                                    <button id="open-folder-button"
                                        class="hidden p-4 rounded-lg bg-gray-600/50 hover:bg-gray-700/50 transition-colors duration-300"
                                        title="Open Install Folder">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
                                        </svg>
                                    </button>
                                    <button id="uninstall-button"
                                        class="hidden p-4 rounded-lg bg-red-800/50 hover:bg-red-700/50 transition-colors duration-300"
                                        title="Uninstall Game">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                            fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z"
                                                clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                    <button id="check-update-button"
                                        class="hidden p-4 rounded-lg bg-blue-800/50 hover:bg-blue-700/50 transition-colors duration-300"
                                        title="Check for Updates">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20"
                                            fill="currentColor">
                                            <path fill-rule="evenodd"
                                                d="M15.549 10.214a.75.75 0 01.902 1.06l-4.5 4.25a.75.75 0 01-1.012-.064l-4.25-4.5a.75.75 0 111.124-.99l3.438 3.654 3.998-3.754a.75.75 0 011.06-.06z"
                                                clip-rule="evenodd" />
                                            <path fill-rule="evenodd"
                                                d="M4.451 9.786a.75.75 0 01-.902-1.06l4.5-4.25a.75.75 0 011.012.064l4.25 4.5a.75.75 0 11-1.124.99L8.75 6.346l-3.998 3.754a.75.75 0 01-1.06.06z"
                                                clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                    <div class="text-sm text-gray-500">
                                        <div id="game-version"></div>
                                        <div id="game-status-text"></div>
                                        <div id="game-status-text"></div>
                                        <div id="prereq-status-container" class="mt-2 hidden">
                                            <span id="prereq-status-text"
                                                class="text-xs text-gray-500 hover:text-white cursor-pointer transition-colors duration-200 underline">Check
                                                Prerequisites</span>
                                        </div>
                                        <div id="download-speed" class="text-xs text-gray-500"></div>
                                    </div>
                                </div>
                                <div id="progress-container" class="mt-4 w-full max-w-lg hidden">
                                    <div class="w-full bg-gray-700 rounded-full h-2.5">
                                        <div id="progress-bar"
                                            class="bg-blue-600 h-2.5 rounded-full transition-all duration-100"
                                            style="width: 0%"></div>
                                    </div>
                                    <div id="progress-text" class="mt-2 text-sm text-gray-400"></div>
                                </div>
                                <div id="locate-game-container" class="mt-4 hidden">
                                    <a href="#" id="locate-game-link"
                                        class="text-sm text-blue-400 hover:underline">Already
                                        Installed? Locate the game folder.</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
        <div id="launcher-version" class="absolute bottom-2 right-4 text-xs text-gray-600"></div>

        <!-- Settings Modal -->
        <div id="settings-modal" class="hidden fixed inset-0 bg-black/60 z-50 flex items-center justify-center">
            <div class="bg-gray-800 rounded-lg shadow-xl p-8 w-full max-w-lg">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Settings</h2>
                    <button id="close-settings-button" class="text-gray-400 hover:text-white">&times;</button>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-2">Installation Path</h3>
                    <div class="flex items-center space-x-4">
                        <input type="text" id="install-path-display"
                            class="bg-gray-700 border border-gray-600 rounded-md px-4 py-2 w-full" readonly>
                        <button id="change-path-button"
                            class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md">Change</button>
                    </div>
                    <p class="text-sm text-gray-400 mt-2">This is where the application files are currently located.</p>
                </div>

                <div class="mt-8 pt-6 border-t border-gray-700">
                    <h3 class="text-lg font-semibold mb-2">Cleanup Old Versions</h3>
                    <p class="text-sm text-gray-400 mb-4">Find and remove old or orphaned installations of VR Classroom.
                    </p>
                    <button id="scan-button"
                        class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-xl w-full">
                        Scan for other versions...
                    </button>
                    <div id="scan-results"
                        class="mt-4 space-y-2 hidden max-h-60 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800 pr-2">
                        <!-- Results will be injected here -->
                    </div>
                </div>
            </div>
        </div>

    </div>
    <script src="./renderer.js" type="module"></script>
</body>

</html>